{%param refresh_url: str %}
{%param percentage: float = 0.0%}

<div id="progress-bar">
    {% if percentage < 100 %}
        <div id="percentage-text">
            {{percentage}}%
        </div>
        <div
            id="completion"
            style="width: {{ percentage }}%"
            hx-get="{{refresh_url}}"
            hx-trigger="every 1s"
            hx-swap="outerHTML"
            hx-target="#progress-bar"
        >
        </div>
    {% else %}
        <div id="completion" style="width: 100%;">
        </div>
    {% endif %}
</div>

<style>
    #progress-bar {
        width: 30rem;
        height: 2rem;

        display: inline-flex;
        align-items: center;

        background: var(--secondary);
        border-radius: 10px;
        border: .1rem solid var(--accent);
    }

    #completion {
        height: 100%;
        border-radius: 10px;
        background: var(--accent);
    }

    #percentage-text {
        position: absolute

    }
</style>
